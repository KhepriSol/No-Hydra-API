"use strict";var _require=require("../models"),Thought=_require.Thought,User=_require.User,thoughtController={getAllThoughts:function(t,n){Thought.find({}).then(function(t){return n.json(t)}).catch(function(t){console.log(t),n.status(500).json(t)})},getThoughtById:function(t,n){var o=t.params;Thought.findOne({_id:o.id}).select("-__v").sort({_id:-1}).then(function(t){t?n.json(t):n.status(404).json({message:"No thought found with id."})}).catch(function(t){console.log(t),n.status(400).json(t)})},addThought:function(t,n){var o=t.body;Thought.create(o).then(function(t){return User.findOneAndUpdate({_id:o.userId},{$addToSet:{thoughts:t._id}},{new:!0})}).then(function(t){t?n.json(t):n.status(404).json({message:"No user found with this id."})}).catch(function(t){console.log(t),n.status(400).json(t)})},updateThought:function(t,n){var o=t.params,e=t.body;Thought.findOneAndUpdate({_id:o.thoughtId},{$set:e},{runValidators:!0,new:!0}).then(function(t){return t?n.json({message:"Success"}):n.status(404).json({message:"No thought with this id!"})}).catch(function(t){return n.json(t)})},removeThought:function(t,n){var o=t.params;Thought.findOneAndDelete({_id:o.thoughtId}).then(function(t){return t?User.findOneAndUpdate({thoughts:o.thoughtId},{$pull:{thoughts:o.thoughtId}},{new:!0}):n.status(404).json({message:"No thought with this id!"})}).then(function(t){t?n.json(t):n.status(404).json({message:"No thought found with this id!"})}).catch(function(t){return n.json(t)})},addReaction:function(t,n){var o=t.params,e=t.body;Thought.findOneAndUpdate({_id:o.thoughtId},{$push:{reactions:e}},{new:!0,runValidators:!0}).then(function(t){t?n.json(t):n.status(404).json({message:"No reaction found with this id!"})}).catch(function(t){return n.json(t)})},removeReaction:function(t,n){var o=t.params;Thought.findOneAndUpdate({_id:o.thoughtId},{$pull:{reactions:{reactionId:o.reactionId}}},{new:!0}).then(function(t){t?n.json(t):n.status(404).json({message:"No reaction found with this id."})}).catch(function(t){return n.json(t)})}};module.exports=thoughtController;
//# sourceMappingURL=thought-controllers.min.js.map
