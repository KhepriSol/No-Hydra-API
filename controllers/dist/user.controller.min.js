"use strict";var _require=require("../models"),User=_require.User,userController={getAllUsers:function(n,e){User.find({}).populate({path:"thoughts",select:"-__v"}).populate({path:"friends",select:"-__v"}).select("-__v").sort({_id:-1}).then(function(n){return e.json(n)}).catch(function(n){console.log(n),e.status(500).json(n)})},getUserById:function(n,e){var t=n.params;User.findOne({_id:t.id}).populate({path:"thoughts",select:"-__v"}).select("-__v").then(function(n){return e.json(n)}).catch(function(n){console.log(n),e.sendStatus(400)})},createUser:function(n,e){var t=n.body;User.create(t).then(function(n){return e.json(n)}).catch(function(n){return e.status(400).json(n)})},updateUser:function(n,e){var t=n.params,s=n.body;User.findOneAndUpdate({_id:t.id},s,{new:!0,runValidators:!0}).then(function(n){n?e.json(n):e.status(404).json({message:"No user found with this id."})}).catch(function(n){return e.status(400).json(n)})},deleteUser:function(n,e){var t=n.params;User.findOneAndDelete({_id:t.id}).then(function(n){if(n)return n;e.status(404).json({message:"No user found with this id."})}).then(function(n){User.updateMany({_id:{$in:n.friends}},{$pull:{friends:t.userId}}).then(function(){Thought.deleteMany({username:n.username}).then(function(){e.json({message:"User deleted successfully"})}).catch(function(n){console.log(n),e.status(400).json(n)})}).catch(function(n){console.log(n),e.status(400).json(n)})}).catch(function(n){console.log(n),e.status(400).json(n)})},addToFriendList:function(n,e){var t=n.params;User.findOneAndUpdate({_id:t.userId},{$push:{friends:t.friendId}},{new:!0}).then(function(n){n?e.json(n):e.status(404).json({message:"No user found!"})}).catch(function(n){console.log(n),e.json(n)})},removefromFriendList:function(n,e){var t=n.params;User.findOneAndDelete({_id:t.thoghtId}).then(function(n){return n?User.findOneAndUpdate({friends:t.friendId},{$pull:{friends:t.friendId}},{new:!0}):e.status(404).json({message:"No friend found."})}).then(function(n){n?e.json(n):e.status(404).json({message:"No friend found."})}).catch(function(n){return e.json(n)})}};module.exports=userController;
//# sourceMappingURL=user.controller.min.js.map
